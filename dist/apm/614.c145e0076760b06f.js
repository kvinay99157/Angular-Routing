"use strict";(self.webpackChunkapm=self.webpackChunkapm||[]).push([[614],{2614:(ct,f,a)=>{a.r(f),a.d(f,{ProductModule:()=>dt});var s=a(6826),t=a(8256),m=a(529),h=a(9646),P=a(2843),g=a(8505),l=a(262),v=a(4004);let _=(()=>{class r{constructor(e){this.http=e,this.productsUrl="api/products"}getProducts(){return this.http.get(this.productsUrl).pipe((0,g.b)(e=>console.log(JSON.stringify(e))),(0,l.K)(this.handleError))}getProduct(e){return 0===e?(0,h.of)(this.initializeProduct()):this.http.get(`${this.productsUrl}/${e}`).pipe((0,g.b)(i=>console.log("getProduct: "+JSON.stringify(i))),(0,l.K)(this.handleError))}createProduct(e){const o=new m.WM({"Content-Type":"application/json"});return e.id=null,this.http.post(this.productsUrl,e,{headers:o}).pipe((0,g.b)(i=>console.log("createProduct: "+JSON.stringify(i))),(0,l.K)(this.handleError))}deleteProduct(e){const o=new m.WM({"Content-Type":"application/json"});return this.http.delete(`${this.productsUrl}/${e}`,{headers:o}).pipe((0,g.b)(d=>console.log("deleteProduct: "+e)),(0,l.K)(this.handleError))}updateProduct(e){const o=new m.WM({"Content-Type":"application/json"});return this.http.put(`${this.productsUrl}/${e.id}`,e,{headers:o}).pipe((0,g.b)(()=>console.log("updateProduct: "+e.id)),(0,v.U)(()=>e),(0,l.K)(this.handleError))}handleError(e){let o;return o=e.error instanceof ErrorEvent?`An error occurred: ${e.error.message}`:`Backend returned code ${e.status}: ${e.message}`,console.error(e),(0,P._)(()=>o)}initializeProduct(){return{id:0,productName:"",productCode:"",category:"",tags:[],releaseDate:"",price:0,description:"",starRating:0,imageUrl:""}}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(m.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),C=(()=>{class r{constructor(){this.rating=0,this.starWidth=0,this.ratingClicked=new t.vpe}ngOnChanges(){this.starWidth=75*this.rating/5}onClick(){this.ratingClicked.emit(`The rating ${this.rating} was clicked!`)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["pm-star"]],inputs:{rating:"rating"},outputs:{ratingClicked:"ratingClicked"},features:[t.TTD],decls:7,vars:3,consts:[[1,"crop",3,"title","click"],[2,"width","75px"],[1,"fa","fa-star"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return o.onClick()}),t.TgZ(1,"div",1),t._UZ(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2)(6,"span",2),t.qZA()()),2&e&&(t.Udp("width",o.starWidth,"px"),t.Q6J("title",o.rating))},styles:[".crop[_ngcontent-%COMP%]{overflow:hidden}div[_ngcontent-%COMP%]{cursor:pointer}"]}),r})();var u=a(6895),c=a(433);function b(r,n){if(1&r&&(t.TgZ(0,"div",3)(1,"div",11)(2,"h4"),t._uU(3),t.qZA()()()),2&r){const e=t.oxw();t.xp6(3),t.hij("Filtered by: ",e.listFilter,"")}}function M(r,n){if(1&r&&t._UZ(0,"img",19),2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.Udp("width",o.imageWidth,"px")("margin",o.imageMargin,"px"),t.Q6J("src",e.imageUrl,t.LSH)("title",e.productName)}}const y=function(r){return[r]},q=function(r,n){return{filterBy:r,showImage:n}},w=function(r){return[r,"edit"]};function A(r,n){if(1&r&&(t.TgZ(0,"tr")(1,"td"),t.YNc(2,M,1,6,"img",15),t.qZA(),t.TgZ(3,"td")(4,"a",16),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td"),t._UZ(14,"pm-star",17),t.qZA(),t.TgZ(15,"td")(16,"button",18),t._uU(17," Edit "),t.qZA()()()),2&r){const e=n.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("ngIf",o.showImage&&e.imageUrl),t.xp6(2),t.Q6J("routerLink",t.VKq(14,y,e.id))("queryParams",t.WLB(16,q,o.listFilter,o.showImage)),t.xp6(1),t.hij(" ",e.productName," "),t.xp6(2),t.Oqu(e.productCode),t.xp6(2),t.Oqu(e.releaseDate),t.xp6(2),t.Oqu(t.gM2(12,9,e.price,"USD","symbol","1.2-2")),t.xp6(3),t.Q6J("rating",e.starRating),t.xp6(2),t.Q6J("routerLink",t.VKq(19,w,e.id))}}function I(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"table",12)(1,"thead")(2,"tr")(3,"th")(4,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleImage())}),t._uU(5),t.qZA()(),t.TgZ(6,"th"),t._uU(7,"Product"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Code"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Available"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Price"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"5 Star Rating"),t.qZA(),t._UZ(16,"th"),t.qZA()(),t.TgZ(17,"tbody"),t.YNc(18,A,18,21,"tr",14),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(5),t.hij(" ",e.showImage?"Hide":"Show"," Image "),t.xp6(13),t.Q6J("ngForOf",e.filteredProducts)}}function U(r,n){if(1&r&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" Error: ",e.errorMessage,"\n")}}let N=(()=>{class r{constructor(e,o){this.productService=e,this.route=o,this.pageTitle="Product List",this.imageWidth=50,this.imageMargin=2,this.showImage=!1,this.errorMessage="",this._listFilter="",this.filteredProducts=[],this.products=[]}get listFilter(){return this._listFilter}set listFilter(e){this._listFilter=e,this.filteredProducts=this.listFilter?this.performFilter(this.listFilter):this.products}ngOnInit(){this.listFilter=this.route.snapshot.queryParamMap.get("filterBy")||"",this.showImage="true"===this.route.snapshot.queryParamMap.get("showImage"),this.productService.getProducts().subscribe({next:e=>{this.products=e,this.filteredProducts=this.performFilter(this.listFilter)},error:e=>this.errorMessage=e})}performFilter(e){return e=e.toLocaleLowerCase(),this.products.filter(o=>-1!==o.productName.toLocaleLowerCase().indexOf(e))}toggleImage(){this.showImage=!this.showImage}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(_),t.Y36(s.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],decls:13,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-2"],[1,"col-md-4"],["type","text",3,"ngModel","ngModelChange"],["class","row",4,"ngIf"],[1,"table-responsive"],["class","table mb-0",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"col-md-6"],[1,"table","mb-0"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[4,"ngFor","ngForOf"],[3,"src","title","width","margin",4,"ngIf"],[3,"routerLink","queryParams"],[3,"rating"],[1,"btn","btn-outline-primary","btn-sm",3,"routerLink"],[3,"src","title"],[1,"alert","alert-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4),t._uU(6,"Filter by:"),t.qZA(),t.TgZ(7,"div",5)(8,"input",6),t.NdJ("ngModelChange",function(d){return o.listFilter=d}),t.qZA()()(),t.YNc(9,b,4,1,"div",7),t.TgZ(10,"div",8),t.YNc(11,I,19,2,"table",9),t.qZA()()(),t.YNc(12,U,2,1,"div",10)),2&e&&(t.xp6(2),t.hij(" ",o.pageTitle," "),t.xp6(6),t.Q6J("ngModel",o.listFilter),t.xp6(1),t.Q6J("ngIf",o.listFilter),t.xp6(2),t.Q6J("ngIf",o.products&&o.products.length),t.xp6(1),t.Q6J("ngIf",o.errorMessage))},dependencies:[C,u.sg,u.O5,c.Fj,c.JJ,c.On,s.rH,s.yS,u.H9],styles:["thead[_ngcontent-%COMP%]{color:#337ab7}"]}),r})();function J(r,n){if(1&r&&(t.TgZ(0,"div",12),t._UZ(1,"img",16),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Udp("height",150,"px")("margin",2,"px"),t.Q6J("src",e.product.imageUrl,t.LSH)("title",e.product.productName)}}const O=function(){return["edit"]};function E(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",5)(4,"div",7),t._uU(5,"Name:"),t.qZA(),t.TgZ(6,"div",8),t._uU(7),t.qZA()(),t.TgZ(8,"div",5)(9,"div",7),t._uU(10,"Code:"),t.qZA(),t.TgZ(11,"div",8),t._uU(12),t.qZA()(),t.TgZ(13,"div",5)(14,"div",7),t._uU(15,"Description:"),t.qZA(),t.TgZ(16,"div",8),t._uU(17),t.qZA()(),t.TgZ(18,"div",5)(19,"div",7),t._uU(20,"Availability:"),t.qZA(),t.TgZ(21,"div",8),t._uU(22),t.qZA()(),t.TgZ(23,"div",5)(24,"div",7),t._uU(25,"Price:"),t.qZA(),t.TgZ(26,"div",8),t._uU(27),t.ALo(28,"currency"),t.qZA()(),t.TgZ(29,"div",5)(30,"div",7),t._uU(31,"5 Star Rating:"),t.qZA(),t.TgZ(32,"div",8),t._UZ(33,"pm-star",9),t.qZA()(),t.TgZ(34,"div",5)(35,"div",7),t._uU(36,"Category:"),t.qZA(),t.TgZ(37,"div",8),t._uU(38),t.qZA()(),t.TgZ(39,"div",5)(40,"div",7),t._uU(41,"Tags:"),t.qZA(),t.TgZ(42,"div",8),t._uU(43),t.qZA()()(),t.YNc(44,J,2,6,"div",10),t.qZA(),t.TgZ(45,"div",11)(46,"div",12)(47,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.doRouting())}),t._UZ(48,"i",14),t._uU(49," Back "),t.qZA(),t.TgZ(50,"button",15),t._uU(51," Edit "),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(7),t.Oqu(e.product.productName),t.xp6(5),t.Oqu(e.product.productCode),t.xp6(5),t.Oqu(e.product.description),t.xp6(5),t.Oqu(e.product.releaseDate),t.xp6(5),t.Oqu(t.Dn7(28,10,e.product.price,"USD","symbol")),t.xp6(6),t.Q6J("rating",e.product.starRating),t.xp6(5),t.Oqu(e.product.category),t.xp6(5),t.Oqu(e.product.tags),t.xp6(1),t.Q6J("ngIf",e.product.imageUrl),t.xp6(6),t.Q6J("routerLink",t.DdM(14,O))}}function F(r,n){if(1&r&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("",e.errorMessage,"\n")}}let k=(()=>{class r{constructor(e,o){this.route=e,this.router=o,this.pageTitle="Product Detail",this.product=null,this.errorMessage=""}ngOnInit(){const e=this.route.snapshot.data.resolvedData;this.errorMessage=String(e.error),this.onProductRetrieved(e.product),console.log("error message",this.errorMessage)}onProductRetrieved(e){this.product=e,this.pageTitle=this.product?`Product Detail: ${this.product.productName}`:"No product found"}doRouting(){this.router.navigate(["/products"],{queryParamsHandling:"preserve",queryParams:{message:""}})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(s.gz),t.Y36(s.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"row"],[1,"col-md-8"],[1,"col-md-3"],[1,"col-md-6"],[3,"rating"],["class","col-md-4",4,"ngIf"],[1,"row","mt-4"],[1,"col-md-4"],[1,"btn","btn-outline-secondary","me-3",2,"width","80px",3,"click"],[1,"fa","fa-chevron-left"],[1,"btn","btn-outline-primary",2,"width","80px",3,"routerLink"],[1,"center-block","img-responsive",3,"src","title"],[1,"alert","alert-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.YNc(3,E,52,15,"div",2),t.qZA(),t.YNc(4,F,2,1,"div",3)),2&e&&(t.xp6(2),t.hij(" ",o.pageTitle," "),t.xp6(1),t.Q6J("ngIf",o.product),t.xp6(1),t.Q6J("ngIf",o.errorMessage))},dependencies:[C,u.O5,s.rH,u.H9]}),r})();var S=a(5985);const Q=function(){return["info"]},Z=function(r){return{"fa fa-exclamation":r}},D=function(){return["tags"]},L=function(){return["/products"]};function Y(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"a",6),t._uU(3," Basic Information"),t._UZ(4,"span",7),t.qZA(),t.TgZ(5,"a",6),t._uU(6," Search Tags"),t._UZ(7,"span",7),t.qZA()(),t._UZ(8,"router-outlet"),t.TgZ(9,"div",8)(10,"div",9)(11,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveProduct())}),t._uU(12," Save "),t.qZA(),t.TgZ(13,"button",11),t._uU(14," Cancel "),t.qZA(),t.TgZ(15,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteProduct())}),t._uU(16," Delete "),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(2),t.Q6J("routerLink",t.DdM(7,Q)),t.xp6(2),t.Q6J("ngClass",t.VKq(8,Z,!e.isValid("info"))),t.xp6(1),t.Q6J("routerLink",t.DdM(10,D)),t.xp6(2),t.Q6J("ngClass",t.VKq(11,Z,!e.isValid("tags"))),t.xp6(4),t.Q6J("title",e.isValid()?"Save your entered data":"Disabled until the form data is valid")("disabled",!e.isValid()),t.xp6(2),t.Q6J("routerLink",t.DdM(13,L))}}function V(r,n){if(1&r&&(t.TgZ(0,"div",13),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("",e.errorMessage,"\n")}}let z=(()=>{class r{constructor(e,o,i,d){this.productService=e,this.messageService=o,this.route=i,this.router=d,this.pageTitle="Product Edit",this.errorMessage="",this.dataIsValid={},this.currentProduct=null,this.originalProduct=null}get isDirty(){return JSON.stringify(this.originalProduct)!==JSON.stringify(this.currentProduct)}get product(){return this.currentProduct}set product(e){this.currentProduct=e,this.originalProduct=e?{...e}:null}ngOnInit(){this.route.data.subscribe(e=>{const o=e.resolvedData;this.errorMessage=String(o.error),this.onProductRetrieved(o.product)})}onProductRetrieved(e){this.product=e,this.pageTitle=this.product?0===this.product.id?"Add Product":`Edit Product: ${this.product.productName}`:"No product found"}deleteProduct(){this.product&&this.product.id?confirm(`Really delete the product: ${this.product.productName}?`)&&this.productService.deleteProduct(this.product.id).subscribe({next:()=>this.onSaveComplete(`${this.product?.productName} was deleted`),error:e=>this.errorMessage=e}):this.onSaveComplete(`${this.product?.productName} was deleted`)}isValid(e){return this.validate(),e?this.dataIsValid[e]:this.dataIsValid&&Object.keys(this.dataIsValid).every(o=>!0===this.dataIsValid[o])}reset(){this.dataIsValid={},this.currentProduct=null,this.originalProduct=null}saveProduct(){this.product&&this.isValid()?0===this.product.id?this.productService.createProduct(this.product).subscribe({next:()=>this.onSaveComplete(`The new ${this.product?.productName} was saved`),error:e=>this.errorMessage=e}):this.productService.updateProduct(this.product).subscribe({next:()=>this.onSaveComplete(`The updated ${this.product?.productName} was saved`),error:e=>this.errorMessage=e}):this.errorMessage="Please correct the validation errors."}onSaveComplete(e){e&&this.messageService.addMessage(e),this.reset(),this.router.navigate(["/products"])}validate(){this.dataIsValid={},this.dataIsValid.info=!!(this.product&&this.product.productName&&this.product.productName.length>=3&&this.product.productCode),this.dataIsValid.tags=!!(this.product&&this.product.category&&this.product.category.length>=3)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(_),t.Y36(S.e),t.Y36(s.gz),t.Y36(s.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],decls:5,vars:3,consts:[[1,"card"],[1,"card-header"],["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],[1,"wizard"],["routerLinkActive","active",3,"routerLink"],[3,"ngClass"],[1,"row","mb-2"],[1,"col-md-4"],["type","button",1,"btn","btn-primary","me-3",2,"width","80px",3,"title","disabled","click"],["type","button","title","Cancel your edits",1,"btn","btn-outline-secondary","me-3",2,"width","80px",3,"routerLink"],["type","button","title","Delete this product",1,"btn","btn-outline-warning",2,"width","80px",3,"click"],[1,"alert","alert-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.YNc(3,Y,17,14,"div",2),t.qZA(),t.YNc(4,V,2,1,"div",3)),2&e&&(t.xp6(2),t.hij(" ",o.pageTitle," "),t.xp6(1),t.Q6J("ngIf",o.product),t.xp6(1),t.Q6J("ngIf",o.errorMessage))},dependencies:[u.mk,u.O5,s.lC,s.rH,s.yS,s.Od],styles:['.fa-exclamation[_ngcontent-%COMP%]{color:red}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#efefef;display:inline-block;margin-right:5px;min-width:150px;outline:none;padding:10px 40px;position:relative;text-decoration:none}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{width:0;height:0;border-top:20px inset transparent;border-bottom:24px inset transparent;border-left:20px solid #fff;position:absolute;content:"";top:0;left:0}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{width:0;height:0;border-top:20px inset transparent;border-bottom:24px inset transparent;border-left:21px solid #efefef;position:absolute;content:"";top:0;right:-20px;z-index:2}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child:before, .wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child:after{border:none}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0}.wizard[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{border-radius:0 8px 0 0}.wizard[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{background:#007ACC;color:#fff}.wizard[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]:after{border-left-color:#007acc}']}),r})();function K(r,n){1&r&&(t.TgZ(0,"span"),t._uU(1," Product name is required. "),t.qZA())}function $(r,n){1&r&&(t.TgZ(0,"span"),t._uU(1," Product name must be at least three characters. "),t.qZA())}function H(r,n){1&r&&(t.TgZ(0,"span"),t._uU(1," Product code is required. "),t.qZA())}const T=function(r){return{"is-invalid":r}};function j(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",2)(1,"form",3,4)(3,"fieldset")(4,"legend"),t._uU(5,"Basic Product Information"),t.qZA(),t.TgZ(6,"div",5)(7,"label",6),t._uU(8,"Product Name"),t.qZA(),t.TgZ(9,"div",7)(10,"input",8,9),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.productName=i)}),t.qZA(),t.TgZ(12,"span",10),t.YNc(13,K,2,0,"span",11),t.YNc(14,$,2,0,"span",11),t.qZA()()(),t.TgZ(15,"div",12)(16,"label",13),t._uU(17,"Product Code"),t.qZA(),t.TgZ(18,"div",7)(19,"input",14,15),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.productCode=i)}),t.qZA(),t.TgZ(21,"span",10),t.YNc(22,H,2,0,"span",11),t.qZA()()(),t.TgZ(23,"div",12)(24,"label",16),t._uU(25,"Description"),t.qZA(),t.TgZ(26,"div",7)(27,"textarea",17),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.description=i)}),t.qZA()()()()()()}if(2&r){const e=t.MAs(11),o=t.MAs(20),i=t.oxw();t.xp6(10),t.Q6J("ngModel",i.product.productName)("ngClass",t.VKq(8,T,(e.touched||e.dirty||0!==i.product.id)&&!e.valid)),t.xp6(3),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.minlength),t.xp6(5),t.Q6J("ngModel",i.product.productCode)("ngClass",t.VKq(10,T,(o.touched||o.dirty||0!==i.product.id)&&!o.valid)),t.xp6(3),t.Q6J("ngIf",null==o.errors?null:o.errors.required),t.xp6(5),t.Q6J("ngModel",i.product.description)}}function G(r,n){if(1&r&&(t.TgZ(0,"div",18),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("",e.errorMessage,"\n")}}let R=(()=>{class r{constructor(e){this.route=e,this.errorMessage=""}ngOnInit(){this.route.parent?.data.subscribe(e=>{this.productForm&&this.productForm.reset(),this.product=e.resolvedData.product})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(s.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(c.F,5),2&e){let i;t.iGM(i=t.CRH())&&(o.productForm=i.first)}},decls:2,vars:2,consts:[["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],["novalidate",""],["productForm","ngForm"],[1,"row","mt-4"],["for","productNameId",1,"col-md-2","col-form-label"],[1,"col-md-8"],["id","productNameId","type","text","placeholder","Name (required)","required","","minlength","3","name","productName",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["productNameVar","ngModel"],[1,"invalid-feedback"],[4,"ngIf"],[1,"row","mt-2"],["for","productCodeId",1,"col-md-2","col-form-label"],["id","productCodeId","type","text","placeholder","Code (required)","required","","name","productCode",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["productCodeVar","ngModel"],["for","descriptionId",1,"col-md-2","col-form-label"],["id","descriptionId","placeholder","Description","rows","3","name","description",1,"form-control",3,"ngModel","ngModelChange"],[1,"alert","alert-danger"]],template:function(e,o){1&e&&(t.YNc(0,j,28,12,"div",0),t.YNc(1,G,2,1,"div",1)),2&e&&(t.Q6J("ngIf",o.product),t.xp6(1),t.Q6J("ngIf",o.errorMessage))},dependencies:[u.mk,u.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.On,c.F],encapsulation:2}),r})();function W(r,n){1&r&&(t.TgZ(0,"span"),t._uU(1," A category must be entered. "),t.qZA())}function B(r,n){1&r&&(t.TgZ(0,"span"),t._uU(1," The category must be at least 3 characters in length. "),t.qZA())}function X(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"span")(1,"button",18),t.NdJ("click",function(){const d=t.CHM(e).index,p=t.oxw(2);return t.KtG(p.removeTag(d))}),t._uU(2),t._UZ(3,"span",19),t.qZA()()}if(2&r){const e=n.$implicit;t.xp6(2),t.hij(" ",e," ")}}const tt=function(r){return{"is-invalid":r}};function et(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"div",2)(1,"form",3)(2,"fieldset")(3,"legend"),t._uU(4,"Product Search Tags"),t.qZA(),t.TgZ(5,"div",4)(6,"label",5),t._uU(7,"Category"),t.qZA(),t.TgZ(8,"div",6)(9,"input",7,8),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.product.category=i)}),t.qZA(),t.TgZ(11,"span",9),t.YNc(12,W,2,0,"span",10),t.YNc(13,B,2,0,"span",10),t.qZA()()(),t.TgZ(14,"div",4)(15,"label",11),t._uU(16,"Search Tags"),t.qZA(),t.TgZ(17,"div",6)(18,"input",12),t.NdJ("ngModelChange",function(i){t.CHM(e);const d=t.oxw();return t.KtG(d.newTags=i)}),t.qZA()(),t.TgZ(19,"div",13)(20,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addTags())}),t._uU(21," Add "),t.qZA()()(),t.TgZ(22,"div",15)(23,"div",16),t.YNc(24,X,4,1,"span",17),t.qZA()()()()()}if(2&r){const e=t.MAs(10),o=t.oxw();t.xp6(9),t.Q6J("ngModel",o.product.category)("ngClass",t.VKq(6,tt,(e.touched||e.dirty||0!==o.product.id)&&!e.valid)),t.xp6(3),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.minlength),t.xp6(5),t.Q6J("ngModel",o.newTags),t.xp6(6),t.Q6J("ngForOf",o.product.tags)}}function rt(r,n){if(1&r&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij("",e.errorMessage,"\n")}}let ot=(()=>{class r{constructor(e){this.route=e,this.errorMessage="",this.newTags=""}ngOnInit(){this.route?.parent?.data.subscribe(e=>{this.product=e.resolvedData.product})}addTags(){if(this.product)if(this.newTags){const e=this.newTags.split(",");this.product.tags=this.product.tags?this.product.tags.concat(e):e,this.newTags="",this.errorMessage=""}else this.errorMessage="Enter the search keywords separated by commas and then press Add"}removeTag(e){this.product?.tags?.splice(e,1)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(s.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],decls:2,vars:2,consts:[["class","card-body",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body"],["novalidate",""],[1,"row","mt-2"],["for","categoryId",1,"col-md-2","col-form-label"],[1,"col-md-8"],["id","categoryId","type","text","placeholder","Category (required)","required","","minlength","3","name","category",1,"form-control",3,"ngModel","ngClass","ngModelChange"],["categoryVar","ngModel"],[1,"invalid-feedback"],[4,"ngIf"],["for","tagsId",1,"col-md-2","col-form-label"],["id","tagsId","type","text","placeholder","Search keywords separated by commas","name","tags",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-1"],["type","button","title","Enter the search keywords separated by commas and then press Add",1,"btn","btn-outline-primary",3,"click"],[1,"row"],[1,"col-md-8","offset-md-2"],[4,"ngFor","ngForOf"],["title","Click to remove this tag",1,"btn","btn-outline-secondary",2,"font-size","smaller","margin-bottom","12px","margin-right","2px",3,"click"],[1,"fa","fa-times-circle"],[1,"alert","alert-danger"]],template:function(e,o){1&e&&(t.YNc(0,et,25,8,"div",0),t.YNc(1,rt,2,1,"div",1)),2&e&&(t.Q6J("ngIf",o.product),t.xp6(1),t.Q6J("ngIf",o.errorMessage))},dependencies:[u.mk,u.sg,u.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.On,c.F],encapsulation:2}),r})(),x=(()=>{class r{constructor(e){this.productService=e}resolve(e,o){const i=Number(e.paramMap.get("id"));if(isNaN(i)){const d=`Product id was not a number: ${i}`;return console.error(d),(0,h.of)({product:null,error:d})}return this.productService.getProduct(i).pipe((0,v.U)(d=>({product:d,error:""})),(0,l.K)(d=>{const p=`Retrieval error: ${d}`;return console.error(p),(0,h.of)({product:null,error:p})}))}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(_))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var nt=a(4466);let it=(()=>{class r{canDeactivate(e,o,i,d){return!e.isDirty||confirm(`Navigate away and lose all changes to ${e.product?.productName||"New Product"}?`)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),dt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[nt.m,s.Bz.forChild([{path:"",component:N},{path:":id",component:k,resolve:{resolvedData:x}},{path:":id/edit",component:z,canDeactivate:[it],resolve:{resolvedData:x},children:[{path:"",redirectTo:"info",pathMatch:"full"},{path:"info",component:R},{path:"tags",component:ot}]}])]}),r})()}}]);